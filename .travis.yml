language: python
python:
- '3.6'
- '3.7'
- '3.8'
install:
- pip install --upgrade pip
- pip install -e .
- pip install -r test_requirements.txt
env:
- TEST_ENV=travis
script:
- flake8 . && travis_wait 50 py.test --nbval-lax
before_install:
- openssl aes-256-cbc -K $encrypted_a7c8f759f73f_key -iv $encrypted_a7c8f759f73f_iv
  -in travis.tar.enc -out travis.tar -d
- openssl aes-256-cbc -K $encrypted_39a50b90a369_key -iv $encrypted_39a50b90a369_iv
  -in travis.tar.enc -out travis.tar -d
- tar xvf travis.tar
- mv .globus-native-apps.cfg ~/.globus-native-apps.cfg
after_success:
- coveralls
notifications:
  email:
    recipients:
    - blaiszik@uchicago.edu
    on_success: never
    on_failure: change
  slack:
    on_success: always
    on_failure: always
    rooms:
      secure: vYpU1qxCSx8OMQsHBEfLZP6foqd88Xon54kejUNzMKR6BpOS0rgJZmY1VYKgqd8gWxAox3WyYDyIzEsEO/b0JQ4l53hC9A1Hk0F5YCTm9NjPIb0boIpJ2MbIuijnDAJEEiruevQKH+esmbOssGSg8bDyCd8V1vWrvCEe84pIbfsevIyuUnRWKpEIHk/oIDliUy9d8HhNJLGuJrKnIHtMFw+fkO36yQMxM5SDXuM6yvBXr3+7ntqeZXthYogmKLn1fu+X/V9v8Zz2MlfZmY9G5q3RSJAlC4ASeFLF8GNBZHsRBlGPvF8RNtRiiUlxXmYOes7B61SD3sHVAMvNhSS2xL0LGNU9ZzUWx8HVwlt60ATOF7aOu2Uao3SVWMi50ZC0DfRlUw11gNOyyMFq5zsHK32HeFm81o/TvSr/Iy4Xy8j/psX/38T9MjrgFxPneOolUIBjAeW27kW/39qfLLtPOqA3wmByucmiQTJXJhpIbiEKfnliERxbp5gGdFg0DZKQKWNikxjhUJXKU4EF5FC7m9KgqkgvfcnhhEoz6moRBDAjC9/xr9xIYFDa5bIYuB98gGWle452pUr3x5Br1SvS7RfA42Ob2G2U11T/GQ+uEmXy1Ai5emrxjF10qfXY1j7Oe1MbKNqR/C/n3Z3xjduX3LDSkskvcClqmi9cFuMX3Kk=
deploy:
  provider: pypi
  user: __token__
  on:
    tags: true
  distributions: sdist bdist_wheel
  password:
    secure: H9MCSS244LVKYG70ROmE25m7s0JhuZahaT6EO3rnvgzsCt3ocjlLZMH0rCsj8PjhVCAavT794j2GjNZqlPeQM1XfNx5EC9g4GJ0UiXZLGl7DEUJXUQ/IKlni64sqQIKmliN2z7RD5Mo10+JUmbuLVeQqx7XR0I8827CthiPwLzSYtpiNJRRf3dYRiECDldrwIUaBeF4egWmoblV8OnEMiDhxQIdpqlR5FZf1c8vQd8aqXnVJpXSvkwCZfwiBmZ8Y2ajef4EKiluG+hrw+lReW0Eq/ZA/E8faYR5O5c4+AgiDyWC8IOGyXXnUuD2v09rntjrX5k6h6xqj8AjvUGZgqyyo45tEXaGg3lv8o0W7h1dMx9Oms0zNgJFxagbbWAOC2z48Fe3wAQvwpeQAQ0pB3t1kl6e0WxzvR2enMxpSGeubUxkS6gu03LmwBBRj+DGEkA6TDTbrEuTClcCJEvkdqschiCrZSUNC+eZEuISuXkfBtdF2pOpG1TL6tU5mzUL6K2NEWtaXi/s0P5CscSKuFncBW29ZyuBIJem/Q2Ja/O9GanZGNqDhhNM7xhzxIITSk2uPASo8QotfMXveASyJW1sB5JmArVP9cTKR7j12cgOQ0fhSn+kng+t0DDwNu69uKJdkll/UqmACx5kTTazytdSQmQAWTggIcf389NeQTqE=
